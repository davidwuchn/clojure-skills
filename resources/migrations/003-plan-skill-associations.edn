{:id "003-plan-skill-associations"

 :up
 ["CREATE TABLE IF NOT EXISTS plan_skills (
     plan_id INTEGER NOT NULL,
     skill_id INTEGER NOT NULL,
     position INTEGER NOT NULL,
     created_at TEXT NOT NULL DEFAULT (datetime('now')),
     PRIMARY KEY (plan_id, skill_id),
     FOREIGN KEY (plan_id) REFERENCES implementation_plans(id) ON DELETE CASCADE,
     FOREIGN KEY (skill_id) REFERENCES skills(id) ON DELETE CASCADE
   )"

  "CREATE INDEX IF NOT EXISTS idx_plan_skills_plan ON plan_skills(plan_id)"
  "CREATE INDEX IF NOT EXISTS idx_plan_skills_skill ON plan_skills(skill_id)"]

 :down
 ["DROP INDEX IF EXISTS idx_plan_skills_skill"
  "DROP INDEX IF EXISTS idx_plan_skills_plan"
  "DROP TABLE IF EXISTS plan_skills"]}
